<h2>Your Storage</h2>
<a href="/upload">Upload File</a>
<br /><br />
<form action="/storage/add" method="POST">
  <input type="text" name="name" placeholder="New folder name" required />
  <button type="submit">Add Folder</button>
</form>

<h3>Folders</h3>
<ul>
  <% folders.forEach(folder => { %>
  <li>
    <strong><%= folder.name %></strong>

    <form
      action="/storage/edit/<%= folder.id %>"
      method="POST"
      style="display: inline"
    >
      <input type="text" name="name" placeholder="Rename" required />
      <button type="submit">Edit</button>
    </form>

    <form
      action="/storage/delete/<%= folder.id %>"
      method="POST"
      style="display: inline"
    >
      <button type="submit" onclick="return confirm('Are you sure?')">
        Delete
      </button>
    </form>
  </li>
  <% }) %>
</ul>

<h3>Files</h3>
<ul>
  <% files.forEach(file => { %>
  <li>
    <strong><%= file.name %></strong> (Size: <%= file.size %> bytes)

    <!-- Link to view/download file from Supabase -->
    <a href="<%= file.url %>" target="_blank">View</a>

    
    <form
      action="/storage/delete-file/<%= file.id %>"
      method="POST"
      style="display: inline"
    >
      <button
        type="submit"
        onclick="return confirm('Are you sure you want to delete this file?')"
      >
        Delete
      </button>
    </form> 
  </li>
  <% }) %>
</ul>
